{% extends "base.html" %}

{% block css %}
<style type="text/css">
 .page-header {
     text-underline-offset: 0.5rem;
     padding: 1em;
 }
 .panel-about {
     background: #F8F8F8;
     max-width: 35em;
     margin: 10px;
 }
 .panel-metadata {
     display: inline-block;
     width: fit-content;
     height: fit-content;
     padding: 0;
 }

 .panel-metadata dt {
     color: green;
 }

 .panel-metadata dt::after {
     content: ":";
 }

</style>
{% endblock %}

{% block title %}Dataset: {{ metadata.label }}{% endblock %}
{% block content %}

<header class="page-header text-justify">
    <h1>
	{% if metadata.title %}
	<u>{{ metadata.title}}</u>
	<br/>
	<small>({{ metadata.title or metadata.label}})</small>
        {% else %}
        {{ name }}
        {% endif %}
    </h1>
</header>

<div class="container">
    {% if metadata == {} %}
    <p class="lead">We appreciate your interest, but unfortunately, we don't have any additional information available for: <strong>{{ name }}</strong>. If you have any other questions or need assistance with something else, please feel free to reach out to us.</p>
    {% else %}
    <div class="panel-about panel panel-info panel-metadata text-muted{{ float_p }}">
        <div class="panel-heading"><strong><span class="glyphicon glyphicon-info-sign aria-hidden=true"></span> Details</strong> </div>
        <div class="panel-body">
            <dl class="dl-horizontal">
                {% if metadata.created %} <dt>Created</dt> <dd>{{ metadata.created }}</dd> {% endif %}
                {% if metadata.InbredSetName %} <dt>Data Set Group</dt> <dd>{{ metadata.inbredSetGroup}}</dd> {% endif %}
                {% if metadata.identifier %} <dt>Accession Id</dt> <dd>{{ metadata.identifier}}</dd> {% endif %}
                {% if metadata.hasGeoSeriesId %}
		<dt>GEO Series</dt>
		<dd>
		    <a href="{{ metadata.hasGeoSeriesId }}" target="_blank">{{ metadata.hasGeoSeriesId.split("=")[-1] }}</a>
		</dd>
		{% endif %}
                {% if metadata.title %} <dt>Name</dt> <dd>{{ metadata.title }}</dd> {% endif %}
		{% if metadata.organism %}
		<dt>Organism</dt>
		<dd>
		    <a href="{{ metadata.organismUrl}}" target="_blank">{{ metadata.organism }}</a>
		</dd>
		{% endif %}
		{% if metadata.inbredSetName %} <dt>Group</dt> <dd>{{ metadata.inbredSetName}}</dd> {% endif %}
                {% if metadata.tissueName %} <dt>Tissue</dt> <dd>{{ metadata.tissueName}}</dd> {% endif %}
		{% if metadata.datasetStatusName %} <dt>Dataset Status</dt> <dd>{{ metadata.datasetStatusName }}</dd> {% endif %}
		{% if metadata.platformName %}
		<dt>Platforms</dt>
		<dd>
		    {% if metadata.geoPlatformUrl %}
		    [<a href="{{ metadata.geoPlatformUrl }}" target="_blank">{{ metadata.geoPlatformUrl.split("=")[-1] }}</a>]
		    {% endif %}
                    {{ metadata.platformName }}
		</dd>
		{% endif %}
                {% if metadata.normalization %} <dt>Normalization</dt> <dd>{{ metadata.normalization }}</dd> {% endif %}
                {% if metadata.investigatorName %}
                <dt>Investigator</dt>
                <dd>
                    <a href="{{ metadata.investigatorWebUrl }}" target="_blank">{{ metadata.investigatorName }}</a>
                </dd>
                {% endif %}
                {% if metadata.contributors %} <dt>Contributors</dt> <dd>{{ metadata.contributors|safe }}</dd> {% endif %}
		{% if metadata.datasetOfOrganization %} <dt>Organization</dt> <dd>{{ metadata.datasetOfOrganization }}</dd> {% endif %}
            </dl>
        </div>
    </div>

    <div class="container">
	{% if metadata.specifics %}
	<h3><strong>Specifics of this Data Set:</strong></h3>
	<div>{{ metadata.specifics}}</div>
	{% endif %}

        {% if metadata.description %}
        <h3><strong>Summary:</strong></h3>
        <div>{{ metadata.description|safe }}</div>
        {% endif %}

	{% if metadata.hasExperimentDesignInfo %}
        <h3><strong>Experiment Design:</strong></h3>
        <div>{{ metadata.hasExperimentDesignInfo|safe }}</div>
        {% endif %}

	{% if metadata.hasCaseInfo %}
        <h3><strong>About the cases used to generate this set of data:</strong></h3>
        <div>{{ metadata.hasCaseInfo|safe }}</div>
        {% endif %}

	{% if metadata.aboutTissue %}
        <h3><strong>About the tissue used to generate this set of data:</strong></h3>
        <div>{{ metadata.aboutTissue|safe }}</div>
        {% endif %}

        {% if metadata.hasPlatformInfo %}
        <h3><strong>About the array platform:</strong></h3>
        <div>{{ metadata.hasPlatformInfo|safe }}</div>
        {% endif %}

        {% if metadata.hasDataProcessingInfo %}
        <h3><strong>About data values and data processing:</strong></h3>
        <div>{{ metadata.hasDataProcessingInfo|safe }}</div>
        {% endif %}

	{% if metadata.notes %}
        <h3><strong>Notes:</strong></h3>
        <div>{{ metadata.notes|safe }}</div>
        {% endif %}

	{% if metadata.citation|trim %}
        <h3><strong>Citation:</strong></h3>
        <div>{{ metadata.citation|safe}}</div>
        {% endif %}

	{% if metadata.acknowledgment|trim %}
        <h3><strong>Acknowledgment:</strong></h3>
        <div>{{ metadata.acknowledgment|safe}}</div>
        {% endif %}
    </div>
    {% endif %}

</div>

{% endblock %}

{% block js %}
<script language="javascript" type="text/javascript" src="{{ url_for('js', filename='js_alt/htmx.min.js') }}"></script>
{% endblock %}
